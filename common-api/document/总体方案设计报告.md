<div align=center>
    <h2>2023春 数据结构课程设计</h2>
    <h2>21组</h2>
	<h1>总体方案设计报告</h1>
</div>


| 组号 |    班级    |  姓名  |    学号    |
| :--: | :--------: | :----: | :--------: |
|  21  | 2021211308 | 郭泽远 | 2021211183 |
|  21  | 2021211308 | 郭晨旭 | 2021211184 |
|  21  | 2021211308 | 叶沛鑫 | 2021211174 |

<div >
    <h2>目录</h2>
</div>
[toc]

# 总体方案设计报告

##  前端

### 文件结构

- src/
  - assets/：放置项目静态资源，如图片、字体等；
  - components/：存放可复用的Vue组件；
  - plugins/：存放与Vue应用程序的插件相关的文件；
    - vuetify.js：这个文件是用来配置和安装Vuetify的主要文件。可以在其中引入Vuetify的组件、样式和主题，并进行全局配置。该文件应该导出一个函数，在函数中使用Vue.use()来安装Vuetify插件。
  - router/：存放路由配置文件，包括路由定义、路由守卫等；
    - index.js：定义路由规则和导航逻辑，负责配置和创建Vue Router实例，并将路由与Vue实例关联起来，以实现前端路由功能。
  - views/：用于存放应用程序的视图组件和页面级组件，以便于更好的组织和管理页面组件，同时作为路由配置的基础，每个路由规则都会映射到一个具体的组件。src/views/文件夹的结构通常与路由规则的配置相对应，方便在路由配置中引用正确的视图组件；
    - Auth/AuthMgt.vue:实现了一个身份验证视图组件的功能。它包含了一个登录和注册的表单，用户可以通过输入邮箱和密码进行登录，或者填写姓名、邮箱、密码和组ID进行注册。
    - Course/CourseMgt.vue：实现了用户的课程管理页面，包含课程概览、课程信息修改和课程删除（仅针对管理员）。
    - Home/Home.vue：展示用户主页，如姓名、学号、Email、班级等个人信息和学院、专业等院系信息。
    - Navigation/Navigation.vue：实现地图导航功能，包括点到点导航、途径多点导航。
    - Schedule/ScheduleMgt.vue：实现用户日程管理功能，主要分集体活动和个人活动两个部分来展示，包括活动添加、活动修改、活动删除等操作。
    - Schedule/ScheduleSearch.vue：实现活动搜索功能，包括通过活动名称、活动日期和活动简介三种不同的方式来进行搜索。
  - App.vue：根组件，用于包裹整个应用程序的布局结构，可以在此处设置全局样式和引入全局组件，主要包括活动功能侧边栏和顶部工具栏的展示，以及系统模拟时间的各种操作。
  - main.js：项目入口文件，用于初始化Vue应用和加载所需的插件、路由、状态管理，以及设置全局变量、函数等。

### 主要功能模块

- 路由（Router）：使用Vue Router进行页面导航和路由管理，将路由配置拆分为多个文件，可以使用路由守卫进行权限控制和登录验证。
- UI组件库（Vuetify）: 基于Vuetify 2组件库构建用户界面，使用Vuetify提供的组件、样式和布局来设计和构建应用程序的用户界面。
- Ajax请求封装（Axios）: 使用Axios库来处理与后端的AJAX请求，可以创建通用的请求封装，设置统一的请求拦截器和响应拦截器，处理请求错误和统一的返回数据格式。
- 静态资源管理: 将图像、字体等静态资源放置在assets/目录下，可以使用相对路径引用，或在构建过程中进行打包和处理。

### 项目构建和打包

- 使用Vue CLI脚手架工具进行项目初始化和构建，以便快速搭建开发环境、管理依赖和进行打包部署等。
- 在构建过程中，可以配置Webpack等工具来处理样式、静态资源、代码分割等优化策略，以提高应用程序的性能和加载速度。

## 后端

### 系统架构

![image-20230611152311656](assets/image-20230611152311656.png)

![image-20230611152108747](assets/image-20230611152108747.png)

#### 通讯

直接的前后端请求通过Spring boot提供的端口映射实现，其中跨域问题在后端通过@cors解决

而服务器向用户主动推送的需求，比如课程提醒，模拟时间推进等，通过webSocket技术实现

#### 服务实现

主体的服务实现，基于Spring boot编写

其中服务的入口处通过nginx分流，JWT/spring security来完成简单的登陆；后续如有空闲可以接入sentinel来考虑任务里强调的“用户量庞大的情景”的流量防护。

由于不是单人开发，尝试了通过nacos作为服务的注册中心，用dubbo来完成gRPC的远程服务调用。做到开发独立，架构灵活，测试简单，易于横向扩展

主要是解决在开发过程中多人合作时，接口管理困难，项目依赖混乱的问题

思想是把service的抽象声明封装，提供一个统一的对外接口，然后实现和服务展示可以见仁见智

![image-20230611152341471](assets/image-20230611152341471.png)

nacos作为注册中心，通过dubbo实现服务的gRPC调用

![image-20230611152411496](assets/image-20230611152411496.png)

![image-20230611152433938](assets/image-20230611152433938.png)

#### 数据

数据主要通过MySQL数据库存储，也学习性的通过redis完成了地图信息等一部分存储主要起到一个方便的存储、读入的功能，核心算法由代码实现

### 文件结构

- project/

  - common-api/：放置通用的接口、文档等；
    - document：项目文档
    - weekly-doc：周报
    - src：通用的服务接口、实体类、工具类等

  - gcx/：存放成员郭晨旭编写代码；
    - schedule：学生的日程管理以及用户信息管理模块

  - gzy/：存放成员郭泽远编写代码；
    - guide：地图导航模块
    - login：用户登录注册及权限验证模块
    - simulate：用户模拟系统时间推进模块

### 项目构建和打包

- 通过maven管理，将其导入之后run即可
- 打包已经在pom文件中配置插件，直接使用package指令

```xml
 <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <version>2.5.3</version>
                <configuration>
                    <!-- main方法所在类。 -->
                    <mainClass>com.dslab.simulate.SimulateApplication</mainClass>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
```

